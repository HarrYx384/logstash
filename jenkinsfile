pipeline {
    agent any
      parameters {
        string(name: 'Enter-Tag', description: 'Enter Tag to create specific AMI (EX: for dashboard enter "dashboard" and others sfs, internal, dashboards, card-games, call-break, production).')

        string(name: 'REGIONS', defaultValue: 'ap-south-1', description: 'Enter Regions name (EX: ap-south-1)')
    }
    stages {
        stage ("code checkout"){
            steps{
                git branch: 'main', credentialsId: 'hudson', url: 'https://github.com/HarrYx384/logstash.git'
            }
        }
        stage("now trigger packer"){
            steps{
             script{
                sh """/usr/bin/packer build \
                -var "--tag=\"${Enter-Tag}\"" \
                -var "regions=\"${REGIONS}\"" \
                prod_packer.json
                """  
              }
            }
        }
    }
}
